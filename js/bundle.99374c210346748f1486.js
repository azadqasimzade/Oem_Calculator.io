(()=>{"use strict";var t={storeProduct:function(t){var e;null===localStorage.getItem("products")?(e=[]).push(t):(e=JSON.parse(localStorage.getItem("products"))).push(t),localStorage.setItem("products",JSON.stringify(e))},getProducts:function(){return null===localStorage.getItem("products")?[]:JSON.parse(localStorage.getItem("products"))},updateProduct:function(t){var e=JSON.parse(localStorage.getItem("products"));e.forEach((function(n,r){t.id==n.id&&e.splice(r,1,t)})),localStorage.setItem("products",JSON.stringify(e))},deleteProduct:function(t){var e=JSON.parse(localStorage.getItem("products"));e.forEach((function(n,r){t==n.id&&e.splice(r,1)})),localStorage.setItem("products",JSON.stringify(e))}};function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var r,o,c,u,d=(r=n((function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.name=n,this.price=r})),o={products:t.getProducts(),selectedProduct:null,totalPrice:0},{getProducts:function(){return o.products},getData:function(){return o},getProductById:function(t){var e=null;return o.products.filter((function(n){n.id==t&&(e=n)})),e},setCurrentProduct:function(t){o.selectedProduct=t},getCurrentProduct:function(){return o.selectedProduct},addProduct:function(t,e){var n;n=o.products.length>0?o.products[o.products.length-1].id+1:1;var c=new r(n,t,parseFloat(e));return o.products.push(c),c},updateProduct:function(t,e){var n=null;return o.products.forEach((function(r){r.id==o.selectedProduct.id&&(r.name=t,r.price=parseFloat(e),n=r)})),n},deleteProduct:function(t){o.products.forEach((function(e,n){e.id==t.id&&o.products.splice(n,1)}))},getTotal:function(){var t=0;return o.products.forEach((function(e){t+=e.price})),o.totalPrice=t,o.totalPrice}}),a=(c=d,u={productList:"#item-list",productListItems:"#item-list tr",addButton:"#addBtn",productName:"#productName",productPrice:"#productPrice",productCard:"#productCard",totalAzn:"#total-azn",totalDollar:"#total-dollar",updateBtn:"#updateBtn",deleteBtn:"#deleteBtn",cancelBtn:"#cancelBtn"},{createProductList:function(t){var e="";t.forEach((function(t){e+="\n                    <tr>\n                        <td>".concat(t.id,"</td>\n                        <td>").concat(t.name,"</td>\n                        <td>").concat(t.price,' $</td>\n                        <td class="text-end">\n                            <button type="submit" class="btn btn-warning btn-sm">\n                                <i class="bi bi-pencil-square edit-product"></i>\n                            </button>\n                        </td>\n                    </tr>\n                ')})),document.querySelector(u.productList).innerHTML=e},getSelectors:function(){return u},addProduct:function(t){document.querySelector(u.productCard).style.display="block";var e="\n                    <tr>\n                        <td>".concat(t.id,"</td>\n                        <td>").concat(t.name,"</td>\n                        <td>").concat(t.price,' $</td>\n                        <td class="text-end">\n                            <button type="submit" class="btn btn-warning btn-sm">\n                                <i class="bi bi-pencil-square edit-product"></i>\n                            </button>\n                        </td>\n                    </tr>\n            ');document.querySelector(u.productList).innerHTML+=e},updateProduct:function(t){var e=null;return document.querySelectorAll(u.productListItems).forEach((function(n){n.classList.contains("bg-warning")&&(n.children[1].textContent=t.name,n.children[2].textContent=t.price+" $",e=n)})),e},clearInputs:function(){document.querySelector(u.productName).value="",document.querySelector(u.productPrice).value=""},clearWarnings:function(){document.querySelectorAll(u.productListItems).forEach((function(t){t.classList.contains("bg-warning")&&t.classList.remove("bg-warning")}))},hideCard:function(){document.querySelector(u.productCard).style.display="none"},showTotal:function(t){document.querySelector(u.totalDollar).textContent=t,document.querySelector(u.totalAzn).textContent=parseInt(1.7*t)},addProductToForm:function(){var t=c.getCurrentProduct();document.querySelector(u.productName).value=t.name,document.querySelector(u.productPrice).value=t.price},deleteProduct:function(){document.querySelectorAll(u.productListItems).forEach((function(t){t.classList.contains("bg-warning")&&t.remove()}))},addingState:function(){a.clearWarnings(),a.clearInputs(),document.querySelector(u.addButton).style.display="inline",document.querySelector(u.updateBtn).style.display="none",document.querySelector(u.deleteBtn).style.display="none",document.querySelector(u.cancelBtn).style.display="none"},editState:function(t){t.classList.add("bg-warning"),document.querySelector(u.addButton).style.display="none",document.querySelector(u.updateBtn).style.display="inline",document.querySelector(u.deleteBtn).style.display="inline",document.querySelector(u.cancelBtn).style.display="inline"}}),i=function(t,e,n){var r=t.getSelectors(),o=function(o){var c=document.querySelector(r.productName).value,u=document.querySelector(r.productPrice).value;if(0==!c.trim()&&0==!u.trim()){var d=e.addProduct(c,u);t.addProduct(d),n.storeProduct(d);var a=e.getTotal();t.showTotal(a),t.clearInputs()}o.preventDefault()},c=function(n){if(n.target.classList.contains("edit-product")){var r=n.target.parentNode.parentNode.previousElementSibling.previousElementSibling.previousElementSibling.textContent,o=e.getProductById(r);e.setCurrentProduct(o),t.clearWarnings(),t.addProductToForm(),t.editState(n.target.parentNode.parentNode.parentNode)}n.preventDefault()},u=function(o){var c=document.querySelector(r.productName).value,u=document.querySelector(r.productPrice).value;if(0==!c.trim()&&0==!u.trim()){var d=e.updateProduct(c,u);t.updateProduct(d);var a=e.getTotal();t.showTotal(a),n.updateProduct(d),t.addingState()}o.preventDefault()},d=function(e){t.addingState(),e.preventDefault()},a=function(r){var o=e.getCurrentProduct();e.deleteProduct(o),t.deleteProduct();var c=e.getTotal();t.showTotal(c),n.deleteProduct(o.id),t.addingState(),0==c&&t.hideCard(),r.preventDefault()};return{init:function(){console.log("starting app..."),t.addingState();var n=e.getProducts();0==n.length?t.hideCard():t.createProductList(n);var i=e.getTotal();t.showTotal(i),document.querySelector(r.addButton).addEventListener("click",o),document.querySelector(r.productList).addEventListener("click",c),document.querySelector(r.updateBtn).addEventListener("click",u),document.querySelector(r.cancelBtn).addEventListener("click",d),document.querySelector(r.deleteBtn).addEventListener("click",a)}}}(a,d,t);i.init()})();
//# sourceMappingURL=bundle.99374c210346748f1486.js.map